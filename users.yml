# USUARIOS DEL CURSO - Configuración Centralizada
# Estructura simplificada para mejor gestión

# Usuarios administradores del curso
admin_users:
  - user: juan
    email: juan@curso-infra.com
    groups:
      - sudo
      - ssh-access
      - docker
      - adm
      - systemd-journal
    authorized_keys:
      - name: juan
        key: "{{ lookup('file', 'users/juan/id_rsa.pub') }}"
        
  - user: maria
    email: maria@curso-infra.com
    groups:
      - sudo
      - ssh-access
      - docker
      - www-data
      - adm
      - systemd-journal
    authorized_keys:
      - name: maria
        key: "{{ lookup('file', 'users/maria/id_rsa.pub') }}"
        
  - user: pedro
    email: pedro@curso-infra.com
    groups:
      - sudo
      - ssh-access
      - docker
      - security
      - adm
      - systemd-journal
    authorized_keys:
      - name: pedro
        key: "{{ lookup('file', 'users/pedro/id_rsa.pub') }}"

# Usuarios adicionales por servidor/equipo (se pueden agregar dinámicamente)
additional_users: []

# Lista final de usuarios
users: "{{ admin_users + additional_users }}"

# Usuarios para administración específica (usado por diferentes roles)
monitoring_admins: "{{ admin_users }}"
webserver_admins: "{{ admin_users }}"
security_admins: "{{ admin_users }}"
cicd_admins: "{{ admin_users }}"
traefik_admins: "{{ admin_users }}"

# Configuración de limpieza de usuarios por defecto
cleanup_users:
  - user: ubuntu
    password: '!'
    groups: []
    authorized_keys: []
    state: present  # Mantenemos ubuntu pero sin acceso
  - user: root
    password: '!'
    groups:
      - root
    authorized_keys: []
    state: present
